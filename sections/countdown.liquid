{% if section.settings.enable_countdown %}
  <section id="demo"></section>
{% endif %}

{% schema %}
  {
    "name": "Countdown Bar",
    "settings": [
      {
        "type": "checkbox",
        "id": "enable_countdown",
        "default": true,
        "label": "Enable Count Bar"
      }, {
        "type": "text",
        "id": "select_time",
        "default": "01-12-2023 16:00",
        "label": "Please add time (MM DD YYYY H:MM:SS)"
      }
    ]
  }
{% endschema %}

<script>
  let startCountDown = () => {

    let startTimer = () => {
      let now = new Date().getTime();
      let countDownDate = new Date(`{{section.settings.select_time}}`).getTime();
      let distance = countDownDate - now;
      let days = Math.floor(distance / (1000 * 60 * 60 * 24));
      let hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      let minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      let seconds = Math.floor((distance % (1000 * 60)) / 1000);


      document.getElementById('demo').innerHTML = days + 'd ' + hours + 'h ' + minutes + 'm ' + seconds + 's ';

      if (distance < 0) {
        clearInterval(x);
        document.getElementById('demo').innerHTML = 'EXPIRED';
      }
    };

    setInterval(startTimer, 1000);
  };
  startCountDown();
</script>